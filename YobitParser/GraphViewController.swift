//
//  GraphViewController.swift
//  YobitParser
//
//  Created by Дмитрий Ю on 18/10/2018.
//  Copyright © 2018 Дмитрий Ю. All rights reserved.
//

import UIKit

class GraphViewController: UIViewController {

    @IBOutlet weak var std: UILabel!
    @IBOutlet weak var maxStd: UILabel!
    @IBOutlet weak var minStd: UILabel!
    @IBOutlet weak var graphView: GraphView!
    @IBOutlet weak var max: UILabel!
    @IBOutlet weak var min: UILabel!
    @IBOutlet weak var picture: UIImageView!
    
    
//передается из сегвея с тайблвью
    var tikerNameSegue = "btc_usd"
    var graphPoints : [Float] = [6394.9300000,6398.1100000,6391.7300000,6393.7300000,6399.1000000,6395.1400000,6402.6600000,6401.3900000,6399.0000000,6399.9900000,6399.5200000,6400.0000000,6405.0000000,6417.0400000,6411.3800000,6457.6800000,6441.0100000,6435.1900000,6439.1000000,6437.0100000,6434.0000000,6434.4100000,6434.4100000,6426.5700000,6425.4400000,6429.9900000,6435.0900000,6432.1200000,6425.2800000,6424.9000000,6427.3600000,6431.1400000,6437.5200000,6431.0200000,6436.4300000,6435.4100000,6420.5900000,6419.5100000,6423.4000000,6423.0100000,6423.9900000,6427.2800000,6425.2100000,6426.1200000,6425.0300000,6422.9200000,6423.0000000,6425.0100000,6426.9000000,6430.4200000,6426.7400000,6418.3800000,6411.4300000,6415.9800000,6411.0000000,6421.8900000,6421.8900000,6385.0000000,6395.0000000,6389.6200000,6389.0000000,6394.6800000,6394.0000000,6392.1500000,6393.0500000,6399.7900000,6398.9300000,6398.7900000,6400.1600000,6401.0200000,6403.1100000,6395.0100000,6395.9500000,6395.0000000,6390.0000000,6400.1300000,6393.7600000,6395.0200000,6398.2000000,6400.0100000,6404.5400000,6405.7200000,6403.3700000,6396.1200000,6396.5500000,6402.8400000,6398.4500000,6399.9900000,6396.5500000,6401.9500000,6412.1500000,6408.4000000,6405.9200000,6400.9000000,6400.0300000,6396.2700000,6401.0200000,6407.5900000,6410.0100000,6405.0000000,6395.5800000,6399.0000000,6397.4100000,6399.8400000,6393.0300000,6393.0000000,6393.0900000,6395.3400000,6390.0700000,6385.4100000,6386.0000000,6390.0500000,6388.8800000,6388.8800000,6389.1800000,6389.5700000,6386.9900000,6385.2100000,6424.6100000,6420.0100000,6414.9700000,6414.3500000,6418.0000000,6420.0000000,6415.0000000,6402.0000000,6406.0600000,6392.7000000,6392.8300000,6390.2600000,6395.0000000,6396.6500000,6396.1900000,6404.0000000,6407.5500000,6407.5400000,6406.0000000,6400.0000000,6401.9700000,6400.0000000,6402.0000000,6403.9900000,6401.9300000,6398.0100000,6398.9600000,6402.0800000,6407.5100000,6402.5000000,6404.8700000,6407.6700000,6408.6700000,6408.0300000,6410.0000000,6412.4100000,6412.4100000,6414.8700000,6417.1500000,6416.1700000,6416.6000000,6418.4800000,6416.1700000,6416.1700000,6416.8000000,6416.7500000,6416.1600000,6410.0800000,6404.7200000,6406.0000000,6408.0100000,6408.9500000,6405.0100000,6401.0500000,6402.0400000,6403.5900000,6403.9600000,6398.9900000,6397.3300000,6395.6900000,6395.7600000,6398.7800000,6395.8000000,6394.0100000,6399.9300000,6400.0200000,6405.7400000,6403.9900000,6401.0100000,6404.0100000,6403.2700000,6402.0100000,6402.0500000,6407.0000000,6409.0000000,6414.0000000,6414.9500000,6409.0000000,6409.1200000,6406.4600000,6405.2600000,6405.3900000,6404.9900000,6405.5000000,6405.5400000,6406.3700000,6410.0600000,6410.9900000,6410.8300000,6410.8300000,6410.8300000,6410.8400000,6407.7200000,6405.0100000,6408.6000000,6406.5700000,6404.0300000,6403.9800000,6403.1200000,6403.1100000,6403.1100000,6403.1600000,6402.0100000,6402.0000000,6401.9800000,6404.8500000,6407.7300000,6402.7400000,6404.5500000,6403.7400000,6402.0100000,6400.1200000,6402.8900000,6403.9900000,6401.2300000,6401.3900000,6401.2800000,6402.1000000,6393.0200000,6392.5600000,6395.0200000,6393.1300000,6393.2800000,6396.0700000,6396.1300000,6407.6800000,6403.6200000,6404.5000000,6405.9900000,6399.8700000,6405.5600000,6410.1000000,6412.9100000,6406.0200000,6409.2600000,6405.0100000,6403.7100000,6403.6500000,6403.6700000,6403.6700000,6403.4800000,6402.0100000,6399.0200000,6395.3600000,6395.3600000,6389.4400000,6382.2300000,6387.7400000,6388.8100000,6306.0100000,6332.2300000,6297.7400000,6260.2900000,6267.2500000,6266.3300000,6266.9300000,6266.7200000,6272.4000000,6279.9900000,6277.2600000,6275.9000000,6266.7300000,6267.5200000,6266.6500000,6266.9300000,6259.5700000,6246.5600000,6250.6300000,6243.6100000,6240.0000000,6236.0000000,6257.0100000,6267.2600000,6265.9200000,6266.0000000,6264.1200000,6266.0100000,6265.0400000,6260.0100000,6261.4100000,6258.2100000,6275.0800000,6273.4500000,6272.0800000,6288.9900000,6284.9900000,6277.1400000,6278.4100000,6278.4100000,6270.5500000,6274.5500000,6261.0100000,6256.0000000,6251.5800000,6251.0000000,6250.1700000,6253.2600000,6250.0100000,6262.3000000,6261.5500000,6266.0000000,6261.0100000,6260.0100000,6260.9500000,6258.2500000,6264.4600000,6264.8400000,6264.4500000,6262.3600000,6260.6300000,6258.0100000,6248.1800000,6253.4000000,6253.5000000,6254.9100000,6253.4900000,6261.9000000,6266.0100000,6269.9900000,6270.0000000,6272.9300000,6273.0000000,6267.6300000,6271.5000000,6271.6500000,6265.9500000,6261.5800000,6260.7300000,6267.8800000,6267.8400000,6266.4100000,6263.7800000,6264.4900000,6265.6400000,6265.0100000,6265.0100000,6260.0200000,6261.6400000,6258.9200000,6258.0100000,6257.0000000,6253.7700000,6253.7700000,6258.4500000,6263.8900000,6261.2300000,6261.4900000,6262.6400000,6262.5100000,6259.0000000,6253.2100000,6250.9100000,6221.3700000,6230.0000000,6332.8400000,6309.5900000,6309.9700000,6305.7200000,6295.5800000,6300.5600000,6302.4300000,6297.6400000,6304.0900000,6301.0000000,6301.0000000,6301.6400000,6304.6600000,6308.3700000,6312.6600000,6308.6600000,6304.1800000,6302.2600000,6305.4100000,6304.0000000,6303.1200000,6298.3500000,6302.4300000,6299.3600000,6297.5100000,6296.3300000,6299.1200000,6300.0000000,6295.0000000,6294.0100000,6305.4500000,6299.7400000,6307.3200000,6307.3100000,6301.9300000,6307.3000000,6307.3200000,6307.5000000,6308.2200000,6308.0100000,6308.9200000,6307.5100000,6307.5000000,6304.0100000,6304.0100000,6306.1700000,6307.5100000,6304.8200000,6305.2600000,6305.0000000,6305.0000000,6308.7000000,6309.9900000,6313.7800000,6313.9600000,6323.5100000,6319.9800000,6318.5000000,6337.2300000,6330.2700000,6346.0100000,6338.1400000,6339.7500000,6343.8800000,6344.0000000,6351.2600000,6378.7700000,6373.0000000,6369.0100000,6363.0100000,6357.3800000,6356.7300000,6358.5000000,6363.0100000,6355.0100000,6355.0100000,6356.3400000,6355.1500000,6352.1400000,6347.6900000,6349.8900000,6349.9900000,6345.8900000,6343.7900000,6339.3300000,6339.9900000,6339.9900000,6343.6000000,6345.0000000,6349.2700000,6344.9900000,6360.4500000,6358.8000000,6359.9900000,6364.0100000,6364.0600000,6360.0000000,6355.8800000,6351.7500000,6358.0000000,6348.9800000,6354.0000000,6353.9500000,6349.4500000,6354.9500000,6353.7800000,6352.1000000,6352.6200000,6354.3800000,6353.3800000,6345.8300000,6350.0200000,6349.8000000,6348.8200000,6346.1200000,6345.3800000,6348.5000000,6343.2900000,6345.0000000,6342.5800000,6342.2200000,6339.4500000,6337.0100000,6341.3000000,6340.0100000,6340.7100000,6340.4900000,6342.2100000,6343.0400000,6345.3400000,6343.5000000,6328.0000000,6331.0300000,6328.0200000,6330.0100000,6328.1200000,6328.5100000,6329.8800000,6326.8800000,6323.0900000,6324.0100000,6329.6800000,6327.6800000,6329.0700000,6329.0100000,6327.7400000,6327.5400000,6329.4600000,6326.5200000,6325.0100000,6329.5600000,6330.0000000,6331.5100000,6337.6200000,6340.0000000,6339.1500000,6332.4700000,6333.8600000,6334.9300000,6331.3900000,6331.9600000,6319.0700000,6326.6700000,6331.1300000,6329.7500000,6330.8200000,6332.5000000,6332.8800000,6331.7300000,6331.1900000,6330.3800000,6330.2500000,6334.0000000,6337.6800000,6335.6900000,6340.0100000,6337.7200000,6337.7400000,6342.0000000,6340.9000000,6336.0700000,6338.0700000,6338.9900000,6338.9900000]

    
//Вернуться назад
    @IBAction func Back(_ sender: UIBarButtonItem) {
        let vc = storyboard?.instantiateViewController(withIdentifier: "id1")
        self.present(vc!, animated: true, completion: nil)
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        //блок рекламы
        loadImage()
        print(graphPoints.count)
        //NotificationCenter.default.addObserver(self, selector: #selector(loadImage), name: NSNotification.Name.UIApplicationDidBecomeActive, object: nil)

        max.alpha = 0.3
        min.alpha = 0.3
        max.text = String(Int(graphPoints.max()!))
        min.text = String(Int(graphPoints.min()!))
        std.text = "STD = " + String(standardDeviation(mas: graphPoints))
        maxStd.text = "MaxSTD = " + String(skoMax(std: standardDeviation(mas: graphPoints), mas: graphPoints))
        minStd.text = "MinSTD = " + String(skoMin(std: standardDeviation(mas: graphPoints), mas: graphPoints))
        navigationItem.title = tikerNameSegue + "   " + String(graphPoints.last!)

        //navigationItem.titleView?.tintColor = UIColor.white
       // navigationItem.titleView?.backgroundColor = UIColor.black

    }

    @objc func loadImage() {
        print("load")
        let queue = DispatchQueue.global(qos: .utility)
        queue .async {
            if let data = try? Data(contentsOf: URL(string : "http://kaifolog.ru/uploads/posts/2016-02/1454685985_001.jpg")!) {
                DispatchQueue.main.async {
                    self.picture.image = UIImage(data: data)
                }
            }
        }
    }
    
}
